# 1) Mission & Scope

This project is named "Fastro", a boilerplate to build and maintain an editorial website that:

- Uses **Astro + Tailwind + Iconify + DatoCMS + Vercel + npm**.
- Is written in **TypeScript** and consumes **GraphQL** data.
- Supports **static routes**, **dynamic routes**, **Astro Islands**, **query listeners** (for live updates), and **cache tags** (for granular revalidation).
- Exposes `api/preview` to let editors view **draft** content.

## Objectives

- Create a **solid, maintainable structure** that the team can evolve over time.
- **Follow** the guidelines defined under `/docs`.
- **Continuously update documentation** where you have permission (see Permissions & File Policy).

In addition to the documentation files, If you need real working examples, you can rely on these repos to get inspired, considering them as best practices:

- https://github.com/datocms/astro-starter-kit/tree/main
- https://github.com/voorhoede/head-start
- https://github.com/datocms/astro-website

Also in the `/head-start` folder you can find files, scripts and logic often mentioned in the docuemntation file. This folder is temp, just to help you in understanding, copying and get to the point faster. From this project, compeltely ignore everything about deploy on Cloudflare, testing and overcomplicated part not aligne with the scope of Fastro.



## Out of Scope / Never Do

- **Do not push** directly to the Git repository (no commits to any remote branch).
  - If changes are needed, open a well‑formed **Issue** (and attach a patch file if applicable).
- **Do not modify** any file marked with `agent_edit: false` in its frontmatter.
- **Never include** GraphQL fields whose name ends with **`_private`** (see GraphQL rules below).

# 2) Canonical Documentation & How to Use It

1. `/docs` is the **canonical knowledge base**.
2. `docs/DATOCMS.md` is the **main** reference for DatoCMS integration.
   - Use web search **only** for **DatoCMS product updates** listed at [https://www.datocms.com/product-updates](https://www.datocms.com/product-updates)
3. If information is missing or unclear → **open an Issue** with concise, answerable questions.
4. Keep `docs/TODO.md` **up to date** with tasks you start, complete, or defer or all the **issues** you find

## What to Consult in `/docs`

- **DatoCMS:** `/docs/DATOCMS.md` (Overview, images & video, drafts/updated content, structured text, SEO, real‑time updates, etc.)
- **Suggested maintenance tasks:** `/docs/TODO.md`
- **Decision log:** `/docs/decision-log.md`
- **Project structure rules:** `/docs/project-structure.md`
- **Components catalog & usage:** `/docs/components.md`
- **Helper functions:** `/docs/helpers.md`
- **Translations / multilingual:** `/docs/118n.md`
- **Accessibility:** `/docs/11ty.md`
- **DatoCMS naming conventions:** `/docs/datocms-naming-conventions.md`
- **External dependencies:** `/docs/dependencies.md`
- **Code health & security:** `/docs/code-health.md` (or `/doc/code-health.md` if present)
- **SEO setup:** `/docs/seo.md`
- **Assets (responsive images, video, icons):** `/docs/assets.md`

> **Rule:** When you complete a feature or refactor, update the relevant doc sections and the descriptions of any affected **components, models, or helpers**.

---

# 3) Permissions & File Policy

- **Modifiable by agents:**
  - `docs/**` files that explicitly include `agent_edit: true`
  - Example files, fixtures, and tests (unless otherwise stated)
- **Read‑only:**
  - All files with `agent_edit: false` (CI will enforce)
- **Never touch:**
  - `docs/DATOCMS.md`
  - `schema.ts`(generated by DatoCMS CLI)
  - Any credentials/secrets
  - `.env*` files and environment variable definitions

> **Frontmatter contract:** If a file contains `agent_edit: false`, you **must not** edit it. If changes are required, open an **Issue**.

# 4) General style

## Commit & Pull Request Guidelines

Commit messages in this repo are short, imperative descriptions (e.g., “Fix image component by Astro”). Group related changes and commit frequently rather than monolithic updates. PRs should include: summary of changes, affected routes/components, any schema updates, and screenshots or URLs for UI tweaks. Reference relevant issues or Linear tickets when available.

## DatoCMS & Configuration Tips

Environment variables for CDA/CMA tokens are defined in `datocms.json`; ensure they are present locally before running data-dependent commands. Never edit `schema.ts` manually, always regenerate with `npm run generate-schema`.

# Interaction with humans

Even if you are running with lot of permissions in wiritng mode, feel free to ask questions to clarify the requests asking for additional details.
